# 🎯 项目名称
Novel_Data_Insight_Dashboard（小说数据洞察可视化大屏）

---

## 一、项目目标（Project Goal）

请基于 **FastAPI + Bootstrap + ECharts（或 Chart.js）** 构建一个 **数据可视化大屏 Web 项目**，用于对小说平台数据进行多视角分析，面向以下五类角色：

- 平台侧
- 作者侧
- 读者侧
- 资本侧
- 运营/决策侧（隐含）

项目要求：
- 前后端分离
- 后端提供 RESTful API
- 前端为单页大屏（Dashboard 风格）
- 支持后续扩展为实时分析或多数据源

---

## 二、技术栈约束（必须遵守）

### 后端
- Python 3.10+
- FastAPI
- SQLAlchemy 或 SQLModel
- MySQL（可抽象为 Repository 层）
- Pydantic v2
- Uvicorn

### 前端
- Bootstrap 5（不使用 Vue / React）
- 原生 HTML + JS
- ECharts（优先）或 Chart.js
- Fetch API 调用后端接口

---

## 三、系统整体架构

### 1️⃣ 后端目录结构（必须生成）

```text
backend/
├── app/
│   ├── main.py
│   ├── core/
│   │   ├── config.py
│   │   └── database.py
│   ├── models/
│   ├── schemas/
│   ├── services/
│   ├── api/
│   │   └── v1/
│   │       ├── platform.py
│   │       ├── author.py
│   │       ├── reader.py
│   │       └── capital.py
│   └── utils/
└── requirements.txt
````

### 2️⃣ 前端目录结构

```text
frontend/
├── index.html
├── css/
│   └── dashboard.css
├── js/
│   ├── api.js
│   ├── charts/
│   │   ├── platform.js
│   │   ├── author.js
│   │   ├── reader.js
│   │   └── capital.js
│   └── main.js
```

---

## 四、数据分析模块设计（核心）

### 🔹 2. 平台侧分析（Platform Analysis）

#### 2.1 计算每部作品的热度增长率

* 指标定义：

  ```
  热度增长率 = (本期热度 - 上期热度) / 上期热度
  ```

* API：

  ```
  GET /api/v1/platform/heat-growth
  ```

* 返回字段：

  * book_id
  * title
  * current_heat
  * previous_heat
  * growth_rate

* 图表：

  * Top N 增长率柱状图
  * 支持排序

#### 2.2 新作品热度变化趋势

* 仅统计上线 ≤ 30 天作品
* API：

  ```
  GET /api/v1/platform/new-book-trend
  ```
* 图表：

  * 折线图（时间 × 平均热度）

---

### 🔹 3. 作者侧分析（Author Analysis）

#### 3.1 各类别平均热度

* API：

  ```
  GET /api/v1/author/category-avg-heat
  ```
* 分析目标：

  * 识别高热题材（如科幻、奇闻异事）
* 图表：

  * 横向柱状图 / 雷达图

#### 3.2 字数与热度关系

* API：

  ```
  GET /api/v1/author/wordcount-vs-heat
  ```
* 图表：

  * 散点图
* 要求：

  * 可分区间（<50万 / 50-100万 / >100万）

#### 3.3 完结 vs 连载热度对比

* API：

  ```
  GET /api/v1/author/status-heat-compare
  ```
* 图表：

  * 分组柱状图

---

### 🔹 4. 读者侧分析（Reader Analysis）

#### 4.1 各分类 Top 5 热门作品

* API：

  ```
  GET /api/v1/reader/top-books
  ```
* 图表：

  * 分类切换排行榜

#### 4.2 高热低分作品识别

* 筛选规则：

  * 热度 > 平均值
  * 评分 < 平均评分
* API：

  ```
  GET /api/v1/reader/high-heat-low-score
  ```
* 业务价值：

  * 用于推荐算法优化
* 图表：

  * 表格 + 标记提示

---

### 🔹 5. 资本侧分析（Capital Analysis）

#### 5.1 作品热度积分（IP 价值）

* 示例公式：

  ```
  热度积分 = 阅读量 × 0.4 + 收藏 × 0.3 + 评论 × 0.2 + 付费 × 0.1
  ```
* API：

  ```
  GET /api/v1/capital/ip-value
  ```
* 图表：

  * IP 价值排行榜

#### 5.2 粉丝付费能力分析

* 指标：

  * ARPU
  * 付费率
* API：

  ```
  GET /api/v1/capital/payment-power
  ```
* 图表：

  * 气泡图 / 分布图

---

## 五、前端大屏要求

* 单页面 Dashboard
* Bootstrap Grid 布局（12 栏）
* 模块分区清晰：

  * 顶部：项目标题 & 时间
  * 中部：平台 / 作者
  * 底部：读者 / 资本
* 所有图表通过 Fetch API 动态加载
* 统一深色 / 浅色主题切换能力（预留）

---

## 六、代码生成要求（非常重要）

* 所有接口返回统一结构：

```json
{
  "code": 200,
  "msg": "success",
  "data": {}
}
```

* SQL 查询需封装在 Service 层
* 不允许在 Router 中直接写 SQL
* 每个分析接口必须写清楚：

  * 数据来源
  * 计算逻辑
  * 注释说明业务含义

---

## 七、扩展建议（可选）

* 接入定时任务生成统计快照
* 后期支持 WebSocket 实时热度
* 引入简单推荐评分模型

---

## 八、最终目标

生成：

1. 可运行的 FastAPI 后端
2. 可直接打开的 Bootstrap 可视化大屏
3. 每个分析模块都能独立扩展

```